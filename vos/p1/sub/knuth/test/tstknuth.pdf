procedure
refgbl $echo
refgbl $autousage
body
let _onfail="continue"
let $autousage="none"
let $echo="yes"
write "*** Test KNUTH, KNUTH_DUMP ***"
TKNUTH
TKNUTH  FUNCTION="LINE"
TKNUTH  FUNCTION="SAMP"
TKNUTH  FUNCTION="IN1+1"
TKNUTH  FUNCTION="SQRT(IN1**1.1234+7)"
TKNUTH  FUNCTION="SQRT(IN1**1.1234e1+7)"
TKNUTH  FUNCTION="IN1.AND.IN2"
TKNUTH  FUNCTION="IN1.OR.IN2"
TKNUTH  FUNCTION="IN1.XOR.IN2"
TKNUTH  FUNCTION="IN1.LT.IN2"
TKNUTH  FUNCTION="IN1.GT.IN2"
TKNUTH  FUNCTION="IN1.LE.IN2"
TKNUTH  FUNCTION="IN1.EQ.IN2"
TKNUTH  FUNCTION="IN1.EQ..5"
TKNUTH  FUNCTION="5..EQ.IN1"
TKNUTH  FUNCTION=".NOT.(IN1.GE.IN2)"
TKNUTH  FUNCTION="MOD(IN2,IN1)"
TKNUTH  FUNCTION="MIN(IN1,IN2)"
TKNUTH  FUNCTION="MAX(IN1,IN2)"
TKNUTH  FUNCTION="MAX(COS(SIN(-IN1)+-3)/2,TAN(0))"
TKNUTH  FUNCTION="MAX(IN1,IN2,IN3,IN4,IN5)"
TKNUTH  FUNCTION="100.*SIN(IN1/10.)+100.*COS(IN2/10)"
TKNUTH  FUNCTION="LINE+SAMP"
TKNUTH  FUNCTION="MOD(SAMP,LINE)"
write "*** Test C-language Constructs ***"
TKNUTH  FUNCTION="IN1 | IN2"
TKNUTH  FUNCTION="IN1 & IN2"
TKNUTH  FUNCTION="IN1 % IN2"
TKNUTH  FUNCTION="IN1 ^ IN2"
TKNUTH  FUNCTION="!IN1"
TKNUTH  FUNCTION="IN1 < IN2"
TKNUTH  FUNCTION="IN1 > IN2"
TKNUTH  FUNCTION="IN1 != IN2"
TKNUTH  FUNCTION="IN1 == IN2"
TKNUTH  FUNCTION="IN1 <= IN2"
write "The following strings should all result in BAD FUNCTION errors"
TKNUTH  FUNCTION="IN1.EQ./4"
TKNUTH  FUNCTION="3*("
TKNUTH  FUNCTION="(3,4)"
TKNUTH  FUNCTION="NONSENSE"
TKNUTH  FUNCTION="IN1+"
TKNUTH  FUNCTION=")"
TKNUTH  FUNCTION="IN1.EQ.*4"
! -- more bad functions, per SXP comments -NDR
TKNUTH  FUNCTION="ATAN7(1,2)"
TKNUTH  FUNCTION="SIN5"
TKNUTH  FUNCTION="MOD(0)"
TKNUTH  FUNCTION="MOD(IN1)"
TKNUTH  FUNCTION="ATAN2(IN1)"
TKNUTH  FUNCTION="ATAN2(1,2,3)"
TKNUTH  FUNCTION="3 2"
TKNUTH  FUNCTION="MOD(1,2,3)"
TKNUTH  FUNCTION="LOG 10,2"
TKNUTH  FUNCTION="JUNK" 'KNVAR

write "*** Tests on XKNUTH, KNUTH_LOOKUP ***"
TKNUTH  FUNCTION="IN1+IN2" 'XKNUTH
TKNUTH  FUNCTION="(IN1+1)/(IN2+1)" 'XKNUTH
TKNUTH  FUNCTION="min(int(IN1/IN2),999)" 'XKNUTH
TKNUTH  FUNCTION="ABS(IN1-IN2)" 'XKNUTH
TKNUTH  FUNCTION="Amod(IN1,IN2+1)" 'XKNUTH
TKNUTH  FUNCTION="1.5" 'XKNUTH
TKNUTH  FUNCTION="1.4" 'XKNUTH
write "*** Tests on KNUTH_VAR ***"
TKNUTH  FUNCTION="IN1" 'KNVAR
TKNUTH  FUNCTION="IN50" 'KNVAR
TKNUTH  FUNCTION="DN" 'KNVAR
TKNUTH  FUNCTION="LINE" 'KNVAR
TKNUTH  FUNCTION="SAMP" 'KNVAR
TKNUTH  FUNCTION="BAND" 'KNVAR
TKNUTH  FUNCTION="X1" 'KNVAR
TKNUTH  FUNCTION="C13" 'KNVAR
write "*** Test COMPLEX Operations ***"
TKNUTH  FUNCTION="IN1+IN2" 'XKNUTH 'COMPLEX CVALUES=(0,1,2,0)
TKNUTH  FUNCTION="IN1+IN2+IN3" 'XKNUTH 'COMPLEX CVALUES=(0,1,2,0,4,5)
TKNUTH  FUNCTION="IN1-IN2" 'XKNUTH 'COMPLEX CVALUES=(5,4,2,-1)
TKNUTH  FUNCTION="IN1*IN2" 'XKNUTH 'COMPLEX CVALUES=(1,1,1,1)
TKNUTH  FUNCTION="IN1/IN2" 'XKNUTH 'COMPLEX CVALUES=(0,2,1,1)
TKNUTH  FUNCTION="ABS(IN1)" 'XKNUTH 'COMPLEX CVALUES=(1,1)
TKNUTH  FUNCTION="SIN(IN1/4)" 'XKNUTH 'COMPLEX CVALUES=(3.14159,0)
TKNUTH  FUNCTION="COS(IN1/4)" 'XKNUTH 'COMPLEX CVALUES=(0,1)
TKNUTH  FUNCTION="TAN(IN1/4)" 'XKNUTH 'COMPLEX CVALUES=(3.14159,1)
TKNUTH  FUNCTION="3 + 4*SQRT(-1)" 'XKNUTH 'COMPLEX 
TKNUTH  FUNCTION="IN1 ** sqrt(-1)*IN2" 'XKNUTH 'COMPLEX +
   CVALUES=(2.71828,0,3.1416,0)
TKNUTH  FUNCTION="MOD(IN1,IN2)" 'XKNUTH 'COMPLEX CVALUES=(16,7,4,3)
TKNUTH  FUNCTION="MAX(IN1,IN2)" 'XKNUTH 'COMPLEX CVALUES=(16,2,4,3)
TKNUTH  FUNCTION="MIN(IN1,IN2)" 'XKNUTH 'COMPLEX CVALUES=(16,2,4,3)
TKNUTH  FUNCTION="IN1 == IN2" 'XKNUTH 'COMPLEX CVALUES=(16,16,4,3)
TKNUTH  FUNCTION="IN1 != IN2" 'XKNUTH 'COMPLEX CVALUES=(16,16,16,3)
write "This should return e (2.718) for COMPLEX"
tknuth fun="cos(in1) + sqrt(-1) * sin(in1)" 'xkn 'comp cval=(0,1)
write "This should return PI (3.1415) *i for COMPLEX"
TKNUTH  FUNCTION="2*LOG(IN1)" 'XKNUTH 'COMPLEX CVALUES=(0,1)

end-proc
