////////////////////////////////////////////////////////////////
// CursorModel.cc
//
//	Model for subclasses of CursorBasicView.
//
////////////////////////////////////////////////////////////////
#include "CursorModel.h"
#include "ViewMacros.h"
#include "CursorBasicView.h"
#include "XvicImage.h"

////////////////////////////////////////////////////////////////
//	Constructor
////////////////////////////////////////////////////////////////
CursorModel::CursorModel(Boolean trackingEnabled, Widget iw) 
{
	// INIT ARGS
	_trackingEnabled = trackingEnabled;
	_iw = iw; 				// SAVE WIDGET

	// SET RESOURCE IN WIDGET TO TRACK 
	XtVaSetValues(_iw, XvicNtrackFloatingCursor, True, NULL);

	// ATTACHMENT INIT
	_numViews = 0;
	_views = NULL;
}

////////////////////////////////////////////////////////////////
//	Destructor
////////////////////////////////////////////////////////////////
CursorModel::~CursorModel()
{
	// SET RESOURCE IN WIDGET NOT TO TRACK 
	XtVaSetValues(_iw, XvicNtrackFloatingCursor, False, NULL);

	if (_views != NULL)
		delete [] _views;
}

////////////////////////////////////////////////////////////////
//	attachView
////////////////////////////////////////////////////////////////
void CursorModel::attachView(CursorBasicView * view)
{
	AttachViewMacro(CursorBasicView, _views, _numViews, view);
	view->update();
}

////////////////////////////////////////////////////////////////
//      detachView
////////////////////////////////////////////////////////////////
void CursorModel::detachView(CursorBasicView *view)
{
        DetachViewMacro(CursorBasicView, _views, _numViews, view);
}

////////////////////////////////////////////////////////////////
//	updateView
////////////////////////////////////////////////////////////////
void  CursorModel::updateViews()
{
      for (int i=0; i<_numViews; i++)
              _views[i]->update();
}
