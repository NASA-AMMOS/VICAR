.TITLE
VICAR demonstrationprogram  '&"TMAIN_PROC_NAME"'

.proc &"TMAIN_PROC_NAME"_general
Enter general input parameters and select function of the second menu-point 
(type RUN when done)
This point has to be addapted to the photometry application program

.proc tcommon_&TCOMMON_FUNC
Enter parameters for the "&TCOMMON_FUNC" function 
(type RUN when done)

.proc common_save_par
Enter the name for the par-file where you want to save your parameters
(type RUN when done)

.proc common_proc_done
Run main application program '&"TMAIN_PROC_NAME"'



.help
Name of Program:	TCOMMON_SUBPDF
	
PURPOSE:	TCOMMON_SUBPDF tests the common sub-pdf's.
	
FUNCTION:

TCOMMON_SUBPDF is a program to test the common sub-pdf's and demonstrate the 
usage of menu-driven input of the large number of different PDF parameters 
(as example related to photometric calculus) into the main program (including 
their various permitted ranges and default settings).  

The MDF is used to organize PDF parameters into different "menus".  The goal of 
such menus is to organize input parameters into parameter groups related to 
specific topics (e.g. I/O-parameters, photometric parameters, map parameters,  
SPICE parameters) in order to facilitate the preparation and the execution of a 
program to the user.

This program uses most of the sub PDFs delivered by the 'COMMON_SUBPDF.COM'.  

This test program shows to the software user how to
	-navigate through a menu;
	-switch between the interactive operation modes of TAE (i.e. Command  
	  Line Mode [TCL], Tutor Mode, and Menu Mode);
	-save the parameter set for later re-processing;
	-delete temporary parameter files.

This program demonstrates to the software developer how to
	-integrate sub PDFs into their main program
	-set the different defaults for parameters for a tutor-session 
	 or the batch mode;

The programmers are welcome to cut out and vary the tcommon_subpdf.pdf 
tcommon_subpdf_general.pdf, tcommon_subpdf.mdf and the tcommon_global.pdf for 
use in their own programs using other defaults, additional parameters, and 
different or additional submenues (see also the demonstration program PHODEM). 
But be carefully for creating names for global variables, because these global
defintions are for the hole VICAR-session.  Note that the default values of 
the SUB-PDF's will be overwritten by the default values of the main-pdf (in 
this case by TCOMMON_SUBPDF.PDF).


EXECUTION:

There are separate PDFs for each entry point seen in the main menu.  If you 
select a particular menu point, you will enter the normal tutor mode of 
this SUBPDF.  In this demo program, the menu points have the following 
(dummy/simulated!) meanings:

1. Select the first menu point to input the general parameters for a program
   such as the names of input/output files, the name of the second entry 
   point, and so on.
2. Select this menu point to enter the parameters associated to the 
   selected function.
   In this case, the name of this menu point (the SUBPDF pertaining to this 
   menu point and) are changing depending on your input of the parameter 
   FUNCTION in the first menu point.
3. Select this menu point to specify the name of the parameter file which is 
   generated by the program (the default name in VICAR programs: LAST.PAR).
   This is useful because in a Menu there is no 'save'-command to save a 
   parameter file with a user-specified name (e.g. "save proc_name.par").

   EXECUTION :

   USER ACTION				RESULT

   don't call this menu point		last.par

   exit this menu point with 'exit'	last.par

   exit this menu point with 'run'	the user-specified name or the 'name 
					of the application procedure .par' as 
					it is given by the parameter 'save_par'


4. This menu point is the entry point to execute the main program.


You can repeat all steps and reenter all menu items except the step that leads 
to the execution of the program.

If you request help for the selection points in the Menu, you will get the help 
text contained in the respective sub PDFs.


HELPS :

- You will get the common help contained in the ".mdf" file (tcommon_subpdf.mdf)
  by typing "help *" in the menu,
- but you will get the help text contained in programs main-PDF 
  (tcommon_subpdf.pdf) by processing of "help-help" applied to the program 
  (should be verry similary).
- If you request help for the selection points in the Menu, you will get the 
  help text contained in the respective sub PDFs.




VICAR PARAMETERS:

NOTE: All parameters (including those from the photometry subPDFs) have to be 
defined in the mainPDF (TPHOPDF.pdf).

Name		Type		Description

inp		string		File name of the input image (dummy) 						
out		string		File name for the output image(dummy)
						
FUNCTION	string		This parameter selects the menu point for 
				input the parameters accossiated with this 
				function.
				When returning to the highest level of the 
				menu (i.e. the MDF-file) you will see that 
 				the second selection point has been changed 
				according to your input of FUNCTION .

INC_ANG		real		other parameter independent of the functions

EM_ANG		real		other parameter independent of the functions

PHAS_ANG	real		other parameter independent of the functions

PARAM1		real		Parameter valid for the FUNC1, FUNC2 and FUNC3. 

PARAM2		real		Parameter valid for the FUNC1, FUNC2 and FUNC3.

PARAM3		real		Parameter valid for the FUNC1, FUNC2 and FUNC3.

PARAM4		real		Parameter valid for the FUNC2 and FUNC3.

PARAM5		real		Parameter valid for the FUNC1 and FUNC3.


PARAMETERS SORTED BY SUB-PDFS :

Name of PDF file	PDF parameters	default		comments
(will appear as a	within this	setting	
separate sub-menu)	particular 
			sub-menu			


1) GENERAL INPUT / OUTPUT :
	
tcommon_subpdf_general	INP

			OUT

			FUNCTION	FUN2 	Desired Function/mode	
						determined the second menu point
									
						Permitted values :

						FUNC1, 
						FUNC2, 
						FUNC3 

			INC_ANG			other parameter independent of 
						the functions

			EM_ANG			other parameter independent of 
						the functions

			PHAS_ANG		other parameter independent of 
						the functions


2) FUNCTION MENU :

Note:  All PDF parameters must be defined in the main program's PDF in order to 
access the different submenues correctly.  

actuell second menu	Parameter 	default	Comment
(subpdf-name.pdf)	Names

COMMON_FUNC1		PARAM1		0.1	parameter 1 
(common_func1.pdf)	PARAM2		0.2	parameter 2
			PARAM3		0.3	parameter 3
			PARAM5		0.4	parameter 5

COMMON_FUNC2		PARAM1		0.5	parameter 1
(common_func2.pdf)	PARAM2		0.6	parameter 2 
			PARAM3		0.7	parameter 3
			PARAM4		0.8	parameter 4
			PARAM5		0.9	parameter 5

COMMON_FUNC3		PARAM2		1.0	parameter 2
(common_func3.pdf)	PARAM3		1.1	parameter 3
			PARAM4		1.2	parameter 4
			PARAM5		1.3	parameter 5



3) PAR-FILE NAME

common_save_par		SAVE_PAR		Name of the TEA-parameter file 
						containing all parameters 
						needed to running the program.
                                                default:
						name of the main program 
						with the extention ".par

4) RUN  MAIN PROGRAM

common_proc_done		-			runs the program


GLOBAL VARIABLE:
The following global variables defined by the tcommon_global.pdf must be 
referenced:

	Name		Type			Description

	TCOMMON_FUNC	string	      		It containes the names of the 
						valid functions (to pass 
						into the menu).

	TMAIN_PROC_NAME	string			Name of the main procedure.


	

BACKGROUND AND REFERENCES :	TAE Command Language (TCL)
				Programmers's Manual
				Version 5.1
				NASA Goddard Space Flight Centre, 1991


SOFTWARE PLATFORM :		VICAR 13, TAE 5.2
				(VMS/AXP/SUNOS/SOLARIS)

HARDWARE PLATFORM :		No particular hardware required;
				tested on VMS/AXP/SUNOS/SOLARIS

PROGRAMMING LANGUAGE :		TCL , C	

HISTORY:			Friedel Oschuetz, Sept. '94, original

COGNIZANT PROGRAMMER:		Friedel Oschuetz
				Institute of Planetary Exploration
				DLR
				12484 Berlin (FRG)



.end
