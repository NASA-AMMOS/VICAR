procedure
refgbl $echo
body
let _onfail="continue"
let $echo="yes"
!   TEST SCRIPT FOR MGEOM
!
!
! Now generate BYTE input data set
! 
gen MGTEST 10 10 SINC=40 LINC=40
! 
! Verify existence of input file
list MGTEST
!
!  Try some copies.
!  Check case of grid bigger than image.
mgeom MGTEST MGTEST1 NAH=1 NAV=1+ 
   TIEPOINT=(1.,1.,1.,1.,   1.,20.,1.,20.,+
            20.,1.,20.,1., 20.,20.,20.,20.)
difpic (MGTEST1 MGTEST)

!  Check case of grid smaller than image.
mgeom MGTEST MGTEST1 NAH=1 NAV=1+ 
   TIEPOINT=(1.,1.,1.,1.,   1.,2.,1.,2.,+
             2.,1.,2.,1.,   2.,2.,2.,2.)
difpic (MGTEST1 MGTEST)

! 
! Perform simple enlargement to 2X size
mgeom MGTEST MGENLARG NAH=1 NAV=1+ 
   SIZE=(1,1,20,20)+
   TIEPOINT=(1.,1.,1.,1.,1.,20.,1.,10.,+
                20.,1.,10.,1.,20.,20.,10.,10.)
! 
! Print it out
list MGENLARG
! 
! Perform 45 degree rotation clockwise with 1.4 times enlargement
mgeom MGTEST MGROTAT NAH=1 NAV=1+ 
   SIZE=(1,1,20,20)+
   TIEPOINT=(1.,1.,5.,-5.,1.,20.,-5.,5.,+
                20.,1.,15.,5.,20.,20.,5.,15.)
!
! Print it out
list MGROTAT
!
! Perform test of size field handling 
mgeom MGTEST MGROTAT1 NAH=1 NAV=1+ 
   SIZE=(1,1,20,10)+
   TIEPOINT=(1.,1.,5.,-5.,1.,20.,-5.,5.,+
                20.,1.,15.,5.,20.,20.,5.,15.)

mgeom MGTEST MGROTAT2 NAH=1 NAV=1+ 
   SIZE=(1,11,20,1)+
   TIEPOINT=(1.,1.,5.,-5.,1.,20.,-5.,5.,+
                20.,1.,15.,5.,20.,20.,5.,15.)

mgeom MGTEST MGROTAT3 NAH=1 NAV=1+ 
   SIZE=(1,12,20,9)+
   TIEPOINT=(1.,1.,5.,-5.,1.,20.,-5.,5.,+
                20.,1.,15.,5.,20.,20.,5.,15.)

! Concatenate the three images.  
mss (MGROTAT1,MGROTAT2,MGROTAT3) MGROTATA 
difpic (MGROTATA,MGROTAT) 

!
! Perform the same operation, but without interpolation
mgeom MGTEST MGROTAT NAH=1 NAV=1+ 
   SIZE=(1,1,20,20)+
   TIEPOINT=(1.,1.,5.,-5.,1.,20.,-5.,5.,+
                20.,1.,15.,5.,20.,20.,5.,15.)+
   INTERP=NOIN
! Print it out
list MGROTAT
!
! Perform the same operation, but without interpolation
mgeom MGTEST MGROTAT NAH=1 NAV=1+ 
   SIZE=(1,1,20,20)+
   TIEPOINT=(1.,1.,5.,-5.,1.,20.,-5.,5.,+
                20.,1.,15.,5.,20.,20.,5.,15.)+
   INTERP=ZNOIN
! Print it out
list MGROTAT
! 
! Now generate BYTE input data set
! 
gen MGTEST2 1000 1000 SINC=1 LINC=1
! 
! Verify existence of input file
list MGTEST2 SIZE=(1,1,15,15)
! 
! DO LONG THIN CASE WITH 45 DEG ROTATION.
mgeom MGTEST2 MGENTHIN NAH=1 NAV=1+ 
   SIZE=(1,1,2,1000)+
   TIEPOINT=(1.,1.,1000.,1.,1.,1000.,1.,1000.,+
            2.,1.,1001.,2.,2.,1000.,2.,1001.)
!
! Print it out
list MGENTHIN 'NOEJECT
! 
gen a 1000 1000
!  Test bilinear interpolation for FR 87169
mgeom							+
inp=a					+
out=b					+
nl=900 ns=900						+
nav=9							+
nah=9							+
tiepoint=(						+
001,001,900,900,001,100,800,800,001,200,300,300,001,300,300,300,+
001,400,400,400,001,500,500,500,001,600,600,600,001,700,700,700,+
001,800,001,800,001,900,001,900,100,001,100,001,+
100,100,100,100,100,200,600,200,100,300,700,300,100,400,100,400,+
100,500,500,500,100,600,600,600,100,700,700,700,100,800,800,800,+
100,900,100,900,		+
200,001,200,001,200,100,200,100,200,200,200,200,200,300,200,300,+
200,400,400,400,200,500,500,500,200,600,600,600,200,700,700,700,+
200,800,200,800,200,900,200,900,300,001,300,001,+
300,100,300,100,300,200,300,200,300,300,300,300,300,400,300,400,+
300,500,300,500,300,600,300,600,300,700,300,700,300,800,300,800,+
300,900,300,900,		+
400,001,400,001,400,100,400,100,400,200,400,200,400,300,400,300,+
400,400,400,400,400,500,500,500,400,600,400,600,400,700,400,700,+
400,800,400,800,400,900,400,900,500,001,500,001,+
500,100,500,100,500,200,500,200,500,300,500,300,500,400,500,400,+
500,500,500,500,500,600,500,600,500,700,500,700,500,800,500,800,+
500,900,500,900,		+
600,001,600,001,600,100,600,100,600,200,600,200,600,300,600,300,+
600,400,600,400,600,500,600,500,600,600,600,600,600,700,600,700,+
600,800,600,800,600,900,600,900,700,001,700,001,+
700,100,700,100,700,200,700,200,700,300,700,300,700,400,700,400,+
700,500,700,500,700,600,700,600,700,700,700,700,700,800,700,800,+
700,900,700,900,		+
800,001,800,001,800,100,100,100,800,200,200,200,800,300,300,300,+
800,400,800,400,800,500,800,500,800,600,800,600,800,700,800,700,+
800,800,800,800,800,900,800,900,900,001,900,001,+
900,100,900,100,900,200,900,200,900,300,900,300,900,400,400,400,+
900,500,900,500,900,600,900,600,900,700,900,700,900,800,800,800,+
900,900,900,900)
list b (50,50,850,850) linc=100 sinc=100
!
! Now do simple tests for half
! Now generate HALF input data set
! 
gen MGTEST 10 10 SINC=40 LINC=40 'HALF
! 
! Verify existence of input file
list MGTEST
! 
!
!  Try some copies.
!  Check case of grid bigger than image.
mgeom MGTEST MGTEST1 NAH=1 NAV=1+ 
   TIEPOINT=(1.,1.,1.,1.,   1.,20.,1.,20.,+
            20.,1.,20.,1., 20.,20.,20.,20.)
difpic (MGTEST1 MGTEST)

!  Check case of grid smaller than image.
mgeom MGTEST MGTEST1 NAH=1 NAV=1+ 
   TIEPOINT=(1.,1.,1.,1.,   1.,2.,1.,2.,+
             2.,1.,2.,1.,   2.,2.,2.,2.)
difpic (MGTEST1 MGTEST)

! Perform simple enlargement to 2X size
mgeom MGTEST MGENLARG NAH=1 NAV=1+ 
   SIZE=(1,1,20,20)   +
   TIEPOINT=(1.,1.,1.,1.,1.,20.,1.,10.,+
                20.,1.,10.,1.,20.,20.,10.,10.)
! 
! Print it out
list MGENLARG
! 
! Perform 45 degree rotation clockwise with 1.4 times enlargement
mgeom MGTEST MGROTAT NAH=1 NAV=1+ 
   SIZE=(1,1,20,20)  +
   TIEPOINT=(1.,1.,5.,-5.,1.,20.,-5.,5.,+
                20.,1.,15.,5.,20.,20.,5.,15.)
!
! Print it out
list MGROTAT
! 
! Now generate HALF input data set
! 
gen MGTEST2 1000 1000 SINC=1 LINC=1 'HALF
! 
! Verify existence of input file
list MGTEST2 SIZE=(1,1,15,15)
! 
! DO LONG THIN CASE WITH 45 DEG ROTATION.
mgeom MGTEST2 MGENTHIN NAH=1 NAV=1+ 
   SIZE=(1,1,2,1000) +
   TIEPOINT=(1.,1.,1000.,1.,1.,1000.,1.,1000.,+
            2.,1.,1001.,2.,2.,1000.,2.,1001.)
!
! Print it out
list MGENTHIN 'NOEJECT
!
gen a 1000 1000 'half
!  Test bilinear interpolation for FR 87169
mgeom							+
inp=a					+
out=b					+
nl=900 ns=900						+
nav=9							+
nah=9							+
tiepoint=(						+
001,001,900,900,001,100,800,800,001,200,300,300,001,300,300,300,+
001,400,400,400,001,500,500,500,001,600,600,600,001,700,700,700,+
001,800,001,800,001,900,001,900,100,001,100,001,+
100,100,100,100,100,200,600,200,100,300,700,300,100,400,100,400,+
100,500,500,500,100,600,600,600,100,700,700,700,100,800,800,800,+
100,900,100,900,		+
200,001,200,001,200,100,200,100,200,200,200,200,200,300,200,300,+
200,400,400,400,200,500,500,500,200,600,600,600,200,700,700,700,+
200,800,200,800,200,900,200,900,300,001,300,001,+
300,100,300,100,300,200,300,200,300,300,300,300,300,400,300,400,+
300,500,300,500,300,600,300,600,300,700,300,700,300,800,300,800,+
300,900,300,900,		+
400,001,400,001,400,100,400,100,400,200,400,200,400,300,400,300,+
400,400,400,400,400,500,500,500,400,600,400,600,400,700,400,700,+
400,800,400,800,400,900,400,900,500,001,500,001,+
500,100,500,100,500,200,500,200,500,300,500,300,500,400,500,400,+
500,500,500,500,500,600,500,600,500,700,500,700,500,800,500,800,+
500,900,500,900,		+
600,001,600,001,600,100,600,100,600,200,600,200,600,300,600,300,+
600,400,600,400,600,500,600,500,600,600,600,600,600,700,600,700,+
600,800,600,800,600,900,600,900,700,001,700,001,+
700,100,700,100,700,200,700,200,700,300,700,300,700,400,700,400,+
700,500,700,500,700,600,700,600,700,700,700,700,700,800,700,800,+
700,900,700,900,		+
800,001,800,001,800,100,100,100,800,200,200,200,800,300,300,300,+
800,400,800,400,800,500,800,500,800,600,800,600,800,700,800,700,+
800,800,800,800,800,900,800,900,900,001,900,001,+
900,100,900,100,900,200,900,200,900,300,900,300,900,400,400,400,+
900,500,900,500,900,600,900,600,900,700,900,700,900,800,800,800,+
900,900,900,900)
list b (50,50,850,850) linc=100 sinc=100
end-proc
