process help=*
PARM INP      TYPE=STRING  COUNT=2
PARM OUT      TYPE=STRING
PARM CAMERA   TYPE=INTEGER	     VALID=(4:7)	DEFAULT=4
PARM RADIUS   TYPE=REAL		     VALID=(2.:10.)	DEFAULT=5.0
PARM CENTERS  TYPE=REAL    COUNT=3:18			DEFAULT=(0.,0.,0.)
PARM DBUG     TYPE=KEYWORD COUNT=0:1 VALID=DBUG		DEFAULT=--
PARM KEEPRESE TYPE=KEYWORD COUNT=0:1 VALID=KEEPRESE	DEFAULT=--
PARM KEEPBLEM TYPE=KEYWORD COUNT=0:1 VALID=KEEPBLEM	DEFAULT=--
END-PROC
.TITLE
"ressar75"  --  Viking Orbiter reseau removal
.HELP
PURPOSE:

"ressar75" is a VICAR applications program which removes the reseau marks
and camera blemishes from Viking Orbiter images.

EXECUTION:

	ressar75 INP=(A,RES) OUT=B user-parameters...
where

	A is the input Viking Orbiter image,
	RES is a reseau location record generated by program RESLOCVO
            containing the reseau locations for image A.
	B is the output image, with reseau and/or blemishes removed.

The input image must be in standard VO format (1204x1056 with no geometric
correction applied).  The entire image is processed (i.e. no size field is
accepted).  The input may be in byte or 16-bit integer format.  The output
will be in the same format as the input.

.page
OPERATION:

Each reseau mark is removed by interpolating over samples a specified radius
(see RADIUS parameter) from its center, as defined in the reseau location
record RES.  Each camera blemish (see VO Calibration Report) is similary
treated, with their centers and radii retrieved from tables built into the
program.

The keywords KEEPRESE and KEEPBLEM may be used to suppress removal of either
reseau or blemishes.

The CENTERS parameter may be used to specify circular areas of the image
to be interpolated over.

Because line 1 of all Viking Orbiter images is normally saturated, it is
not processed, and is simply copied to the output image.

.page
EXAMPLE:

	reslocvo A RES
	ressar75 (A,RES) B

Program "reslocvo" is used to locate the reseau and store the line-sample
coordinates of each reseau mark in RES.  "ressar75" is then used to remove
the reseau and camera blemishes.


TIMING: None available for the VAX

WRITTEN BY: Gary Yagi      Aug. 27, 1980
CONVERTED TO VAX BY: C.C.Avis   14 APR 83   
COGNIZANT PROGRAMMER: Joel Mosher 

REVISION HISTORY:
  7 APR 97  GMY   Allow processing when no flight label is present (87985)
  6 JUL 94  Meredith Cox (CRI) -- Made portable for UNIX
 10 Jul 91  CCA   Modified to call new VOLABV2
  4 Mar 90  GMY   Modest change to test file
 31 OCT 87  GMY   Convert parameter processor to VICAR2
  8 DEC 86  JAM   fix keepblem,keepreseau
  8 APR 86  JAM   I/O CONVERTED TO VICAR2
 14 APR 83  CCA   CONVERTED TO VAX
 13 JAN 81  CCA   IMPLEMENT 3RD INPUT FOR BLEM REMOVAL
 27 AUG 80  GMY   INITIAL RELEASE
.LEVEL1
.VARIABLE INP
 Input VO image
 and reseau location
 record.
.VARIABLE OUT
 Output image
.VARIABLE DBUG
 KEYWORD-OPTIONAL
 Enables diagnotic
 printout.
.VARIABLE RADIUS
 REAL--OPTIONAL
 Radius (size) of
 typical reseau mark.
.VARIABLE CAMERA
 INTEGER--OPTIONAL
 camera serial no. 
 of input frame
.VARIABLE KEEPRESE
 KEYWORD--OPTIONAL
 Suppresses removal
 of the reseau
.VARI KEEPBLEM
 KEYWORD--OPTIONAL
 Suppresses removal
 of camera blemishes
.VARIABLE CENTERS
 3 to 18 REAL numbers
 centers (line,sample)
 and radii of circles
 to be removed.
.LEVEL2
.VARIABLE INP
 STRING--REQUIRED
 Input VO image and
 reseau location record.
 E.g. INP=(IMG,RES)
.VARIABLE OUT
 STRING--REQUIRED
 Output image
.VARIABLE DBUG
 KEYWORD--OPTIONAL
 DBUG should only be specified when debugging the program. This
keyword will cause diagnostic messages to be printed. 
.VARIABLE RADIUS
 REAL--OPTIONAL
 Specifies the radius of the circle enclosing each reseau mark. The accepted
range is 2.0 <= RADIUS <=10.0. The default is RADIUS=5.  (This value is rounded
to the nearest integer by the program).
.VARIABLE CAMERA
 INTEGER--OPTIONAL
 Camera serial number of the input frame. This parameter may be used to
override the camera serial number present in the Viking picture label.
Valid values are:
	7=VO-1A		8=VO-2A
	4=VO-1B		6=VO-2B
.VARIABLE KEEPRESE
 KEYWORD--OPTIONAL
 KEEPRESE specifies the reseau are not to be removed. 
.VARIABLE KEEPBLEM
 KEYWORD--OPTIONAL
 KEEPBLEM specifies blemishes are not to be removed.
.VARIABLE CENTERS
 REAL--OPTIONAL
 Groups of three REAL numbers specifying the center and radius of a
circle to be removed. (line, sample, radius). The entire circle need
not lie completely within the image. 
 The accepted range for radius is:
	2.0 <= RADIUS <= 10.0
 No more than 6 centers may be defined. (A TAE LIMIT)
.END
