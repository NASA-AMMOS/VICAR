procedure
refgbl $echo
body
let _onfail="continue"
let $echo="yes"
!THIS IS A TEST OF MAPGRID
!TEST ON BYTE IMAGE FROM NOW ON
!GENERATE A 150 BY 150 IMAGE
GEN NL=150 NS=150 OUT=GEN
!PRINT OUT THE SYSTEM LABEL OF THE GENERATED IMAGE
LABEL-LIST INP=GEN
!PRINT OUT THE PIXEL VALUE OF THE GENERATED IMAGE
LIST GEN (1,1,5,5)
!TEST WITH DEFAULTED PARAMETERS
MAPGRID INP=GEN OUT=MAP1.DAT
!R2LIB:MAPGRID INP=GEN OUT=MAP11.DAT
!DIFPIC (MAP1.DAT,MAP11.DAT) A
!MAKE SURE THE OUTPUT LABEL REMAIN THE SAME
LABEL-LIST INP=MAP1.DAT
!LABEL-LIST INP=MAP11.DAT
!TEST THE PIXEL VALUES AROUND AND AT GRID LINE
LIST INP=MAP1.DAT SIZE=(20,20,10,10)
LIST MAP1.DAT (95,95,10,10)

!TEST PARM BLAC WITH BYTE IMAGE
MAPGRID INP=GEN OUT=MAP2.DAT 'BLAC
!R2LIB:MAPGRID INP=GEN OUT=MAP22.DAT 'BLAC
!DIFPIC (MAP2.DAT,MAP22.DAT) A
!MAKE SURE THE GRID PATERN PARAM DOESN'T AFFECT THE LABEL
LABEL-LIST INP=MAP2.DAT
!LABEL-LIST INP=MAP22.DAT
!FIND OUT WHAT THE BLAC REALLY DO
LIST MAP2.DAT (20,20,10,10)

!TEST THE MODU PATERN WITH SPECIFIED CONSTANT
MAPGRID INP=GEN OUT=MAP3.DAT MODU=10
!R2LIB:MAPGRID INP=GEN OUT=MAP33.DAT MODU=10
!DIFPIC (MAP3.DAT,MAP33.DAT) A
!FIND OUT WHAT THE SPECIFIED CONSTANT DO
LIST MAP3.DAT (20,20,10,10)
LIST MAP3.DAT (95,95,10,10)

!NOW TEST ON HALF IMAGE
!GENERATE A 150 BY 150 HALFWORD IMAGE
GEN NL=150 NS=150 OUT=GEN FORMAT=HALF
LABEL-LIST INP=GEN
LIST GEN (1,1,5,10)
!TEST WITH DEFAULTED PARAMTERS
MAPGRID INP=GEN OUT=MAP4.DAT
!R2LIB:MAPGRID INP=GEN OUT=MAP44.DAT
!DIFPIC (MAP4.DAT,MAP44.DAT) A
LIST MAP4.DAT (20,20,10,20)

!TEST PARAM BLAC
MAPGRID INP=GEN OUT=MAP5.DAT 'BLAC
!R2LIB:MAPGRID INP=GEN OUT=MAP55.DAT 'BLAC
!DIFPIC (MAP5.DAT,MAP55.DAT) A
LIST MAP5.DAT (20,20,10,20)

!TEST PARAM MODU WITH SPECIAL VALUE
MAPGRID INP=GEN OUT=MAP6.DAT MODU=10
!R2LIB:MAPGRID INP=GEN OUT=MAP66.DAT MODU=10
!DIFPIC (MAP6.DAT,MAP66.DAT) A
LIST MAP6.DAT (20,20,10,20)
LIST MAP6.DAT (95,95,10,20)
end-proc
