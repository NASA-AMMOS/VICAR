procedure
refgbl $echo
refgbl $autousage
PARM DIR TYPE=STRING DEFAULT="/project/test_work/testdata/mipl/vgr/"
LOCAL NEPIMG TYPE=STRING
LOCAL STRIMG TYPE=STRING
LOCAL RSTWIMG TYPE=STRING
body
let $autousage="none"
let _onfail="continue"
let $echo="yes"
let NEPIMG= "&DIR"//"neptune.img"
let STRIMG= "&DIR"//"star.img"
let RSTWIMG= "&DIR"//"restw.img"
!
! RESTORE IMAGE IN NEPTUNE.IMG, USING STAR AS PSF:
restorw (&NEPIMG,&STRIMG) +
 RESTW AREA=(10,10,30,30) MODE=PSF
!
! LIST PART OF PSF IMAGE (FOR PSF TEST):
list PSF (1,1,20,20)
!
! COMPARE RESULT WITH STANDARD RESULT:
DIFPIC (RESTW,&RSTWIMG) X
!
! NOTE THAT THERE IS A DIFFERENCE OF ABOUT 0.25 % BETWEEN THE LATTER
! TWO IMAGES, BECAUSE THE IMAGE IN TESTDATA WAS CREATED BEFORE A CHANGE
! MADE TO WIENER BY JJL, ADDING A NORMALIZATION FACTOR OF 1+(1/SN^2).
end-proc
